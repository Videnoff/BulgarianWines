@using BulgarianWines.Web.ViewModels.Wines
@using System.Security.Claims
@using BulgarianWines.Common
@using BulgarianWines.Data.Models
@using Microsoft.AspNetCore.Identity
@inject SignInManager<ApplicationUser> SignInManager
@model BulgarianWines.Web.ViewModels.Wines.SingleProductViewModel
@{
    this.ViewData["Title"] = Model.Name;
}


<head>
    <link href="~/lib/rateyo/jquery/lib/cjs/jquery.rateyo.min.css" rel="stylesheet" asp-append-version="true" />

    <link href="~/css/wined/themecss/bootstrap.min.css" rel="stylesheet" media="screen" asp-append-version="true" />
    <link href="~/js/wined/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" asp-append-version="true" />

    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600" rel="stylesheet">

    <link href="~/css/wined/stylesheet.css" rel="stylesheet" asp-append-version="true" />
    <link rel="stylesheet" type="text/css" href="~/css/wined/themecss/lightbox.css" asp-append-version="true" />
    <link rel="stylesheet" type="text/css" href="~/js/wined/jquery/magnific/magnific-popup.css" asp-append-version="true" />
    <link rel="stylesheet" type="text/css" href="~/js/wined/jquery/owl-carousel/owl.carousel.css" asp-append-version="true" />
    <link rel="stylesheet" type="text/css" href="~/js/wined/jquery/owl-carousel/owl.transitions.css" asp-append-version="true" />
    <link rel="stylesheet" type="text/css" href="~/css/wined/themecss/carousel.css" asp-append-version="true" />
    <link rel="stylesheet" type="text/css" href="~/css/wined/themecss/custom.css" asp-append-version="true" />
    <link rel="stylesheet" type="text/css" href="~/css/wined/themecss/bootstrap.min.css" asp-append-version="true" />
    <link rel="stylesheet" type="text/css" href="~/css/wined/themecss/animate.css" asp-append-version="true" />



    <!-- <link href="style.href" type="text/css" rel="style.rel" media="style.media" />
    <link href="style.href" type="text/css" rel="style.rel" media="style.media" />
    -->

    <script src="~/js/wined/lightbox/lightbox-2.6.min.js" asp-append-version="true"></script>
    <link href="/js/wined/jquery/magnific/magnific-popup.css" type="text/css" rel="stylesheet" media="screen" asp-append-version="true" />
    <link href="~/js/wined/jquery/datetimepicker/bootstrap-datetimepicker.min.css" type="text/css" rel="stylesheet" media="screen" asp-append-version="true" />
    <script src="~/js/wined/jquery/magnific/jquery.magnific-popup.min.js" asp-append-version="true"></script>
    <script src="~/js/wined/jquery/datetimepicker/moment/moment.min.js" asp-append-version="true"></script>
    <script src="~/js/wined/jquery/datetimepicker/moment/moment-with-locales.min.js" asp-append-version="true"></script>
    <script src="~/js/wined/jquery/datetimepicker/bootstrap-datetimepicker.min.js" asp-append-version="true"></script>
    <script src="~/js/wined/common.js" asp-append-version="true"></script>
    <link href="index52a0.html?route=product/product&amp;product_id=51" rel="canonical" />
    @*<link href="~/images/wined/cart.png" rel="icon" />*@
    <!-- Theme Start -->

    <script type="text/javascript" src="~/js/wined/themejs/custom.js" asp-append-version="true"></script>
    <script type="text/javascript" src="~/js/wined/themejs/jstree.min.js" asp-append-version="true"></script>
    <script type="text/javascript" src="~/js/wined/themejs/carousel.min.js" asp-append-version="true"></script>
    <script type="text/javascript" src="~/js/wined/themejs/productcarosel.min.js" asp-append-version="true"></script>
    <script type="text/javascript" src="~/js/wined/themejs/jquery.custom.min.js" asp-append-version="true"></script>
    <script type="text/javascript" src="~/js/wined/themejs/jquery.formalize.min.js" asp-append-version="true"></script>
    <script type="text/javascript" src="~/js/wined/themejs/jquery.elevatezoom.min.js" asp-append-version="true"></script>
    <script type="text/javascript" src="~/js/wined/themejs/bootstrap-notify.min.js" asp-append-version="true"></script>
    <script type="text/javascript" src="~/js/wined/jquery/magnific/jquery.magnific-popup.min.js" asp-append-version="true"></script>
    <script type="text/javascript" src="~/js/wined/themejs/owl.carousel.min.js" asp-append-version="true"></script>
    <link rel="stylesheet" type="text/css" href="~/js/wined/jquery/magnific/magnific-popup.css" asp-append-version="true" />
    <script src="~/js/wined/themejs/tabs.js" asp-append-version="true"></script>
    <script type="text/javascript" src="~/js/wined/jquery.countdown.js" asp-append-version="true"></script>
    <script type="text/javascript" src="~/js/wined/jquery.countdown.min.js" asp-append-version="true"></script>
    <!-- Theme End -->

    <script src="~/js/wined/jquery/swiper/js/swiper.jquery.js" asp-append-version="true"></script>

    <script src="~/js/wined/common.js" asp-append-version="true"></script>
    <script src="~/js/wined/themejs/parallax.js" asp-append-version="true"></script>

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/rateyo/jquery/lib/cjs/jquery.rateyo.min.js"></script>

</head>


<body class="product-product-51   layout-1">
    <div id="breadcrumb">
        <div class="container">
            <ul class="breadcrumb">
                <li>
                    <a asp-area="" asp-controller="Home" asp-action="Index">
                        <i class="fa fa-home"></i>
                    </a>
                </li>
                <li>
                    <a asp-area="" asp-controller="Categories" asp-action="Products" asp-route-categoryId="@Model.CategoryId">
                        @Model.CategoryName.ToString().ToUpper()
                    </a>
                </li>
                <li>
                    <a asp-area="" asp-controller="Wines" asp-action="SingleWine" asp-route-id="@Model.Id">
                        @Model.Name.ToUpper()
                    </a>
                </li>
            </ul>
        </div>
    </div>
    <!-- ======= Quick view JS ========= -->
    <script>

        function quickbox() {
            if ($(window).width() > 767) {
                $('.quickview').magnificPopup({
                    type: 'iframe',
                    delegate: 'a',
                    preloader: true,
                    tLoading: 'Loading image #%curr%...',
                });
            }
        }
        jQuery(document).ready(function () { quickbox(); });
        jQuery(window).resize(function () { quickbox(); });

    </script>
    <br />
    <br />
    <div class="productpage">
        <div id="product-product" class="container">
            <div class="row">
                <div id="content" class="col-sm-12 productpage">
                    <div class="row">
                        <div class="col-sm-8 product-left">
                            <div class="product-info">
                                <div class="left product-image thumbnails">

                                    <!-- Cloud-Zoom Image Effect Start -->
                                    <div class="image">
                                        <a class="thumbnail" src="@Model.ImageUrl" data-zoom-image="@Model.ImageUrl" title="@Model.Name" alt="@Model.Name" style="max-height: 100%; max-width: 100%">
                                            <img id="tmzoom" src="@Model.ImageUrl" data-zoom-image="@Model.ImageUrl" title="@Model.Name" alt="@Model.Name" style="max-height: 100%; max-width: 100%" />
                                        </a>
                                    </div>

                                    <div class="additional-carousel">
                                        <div class="customNavigation">
                                            <span class="prev">
                                                &nbsp;
                                            </span>
                                            <span class="next">
                                                &nbsp;
                                            </span>
                                        </div>

                                        <div id="additional-carousel" class="image-additional product-carousel">
                                            @foreach (var image in @Model.WineImages)
                                            {
                                                <div class="slider-item">
                                                    <div class="product-block">
                                                        <a @image.ImageUrl title="@Model.Name" class="elevatezoom-gallery" data-image="@image.ImageUrl" data-zoom-image="@image.ImageUrl">
                                                            <img src="@image.ImageUrl" width="74" height="74" title="@Model.Name" alt="@Model.Name" />
                                                        </a>
                                                    </div>
                                                </div>
                                            }
                                        </div>

                                        <span class="additional_default_width" style="display:none; visibility:hidden"></span>
                                    </div>
                                    <!-- Cloud-Zoom Image Effect End-->
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 product-right">
                            <div class="product-right-inner">
                                <h3 class="product-title">
                                    @Model.Name
                                </h3>

                                <div class="rating-wrapper">
                                    @*<span class="fa fa-stack">
                                            <i class="fa fa-star fa-stack-2x"></i>
                                        </span>
                                        <span class="fa fa-stack">
                                            <i class="fa fa-star fa-stack-2x"></i>
                                        </span>
                                        <span class="fa fa-stack">
                                            <i class="fa fa-star fa-stack-2x"></i>
                                        </span>
                                        <span class="fa fa-stack">
                                            <i class="fa fa-star fa-stack-2x"></i>
                                        </span>
                                        <span class="fa fa-stack">
                                            <i class="fa fa-star off fa-stack-2x"></i>
                                        </span>*@

                                    <partial name="_WineRatingPartial" model="new WineRatingViewModel{AverageRating = Model.AverageRating}" />
                                    <a href="#" class="review-count" onclick="$('a[href=\'#tab-review\']').trigger('click');return false;">
                                        @Model.Reviews.Count() reviews
                                    </a>
                                    <a href="#" onclick="$('a[href=\'#tab-review\']').trigger('click');return false;" class="write-review">
                                        <i class="fa fa-pencil"></i>
                                        Write a review
                                    </a>

                                </div>
                                <ul class="list-unstyled">
                                    <li>
                                        <span class="desc">
                                            Category
                                        </span>
                                        <a asp-controller="Categories" asp-action="Products" asp-route-categoryId="@Model.CategoryId">
                                            @Model.CategoryName
                                        </a>
                                    </li>
                                    <li>
                                        <span class="desc">
                                            Harvest:
                                        </span> @Model.HarvestYear
                                    </li>
                                    <li>
                                        <span class="desc">
                                            Origin:
                                        </span> @Model.OriginName
                                    </li>
                                    <li>
                                        <span class="desc">
                                            Variety:
                                        </span> @Model.VarietyName
                                    </li>
                                    <li>
                                        <span class="desc">
                                            Availability:
                                        </span> @Model.AvailabilityStatus
                                    </li>
                                </ul>
                                <ul class="list-unstyled price">
                                    <li>
                                        <h2 class="product-price">
                                            S$ @Model.Price
                                        </h2>
                                    </li>
                                    <li class="discount">
                                        1 to 5 Cases S$ @Model.Price
                                    </li>
                                    <li class="discount">
                                        5 to 10 Cases S$ @Model.Price5To10
                                    </li>
                                    <li class="discount">
                                        10 and above S$ @Model.PriceAbove10
                                    </li>
                                </ul>
                                <div id="product">
                                    @*<h3 class="product-option">
                                            Available Options
                                        </h3>
                                        <div class="form-group required">
                                            <label class="control-label" for="input-option228">
                                                Delivery Date
                                            </label>
                                            <div class="input-group date">
                                                <input type="text" name="option[228]" value="2011-04-22" data-date-format="YYYY-MM-DD" id="input-option228" class="form-control" />
                                                <span class="input-group-btn">
                                                    <button class="btn btn-default" type="button">
                                                        <i class="fa fa-calendar"></i>
                                                    </button>
                                                </span>
                                            </div>
                                        </div>*@
                                    <div class="form-group cart">
                                        @*<label class="control-label qty" for="input-quantity">
                                            Qty
                                        </label>*@
                                        @*<td class="t-qty">
                                            <div class="qty-box">
                                                <div class="quantity buttons_added">
                                                    <a asp-area="" asp-controller="ShoppingCart" asp-action="UpdateQuantity" asp-route-productId="@Model.Id" asp-route-increase="false" class="minus">-</a>
                                                    <input type="number" step="1" min="1" max="100" value="@product.Quantity" class="qty text" size="2" readonly>
                                                    <a asp-area="" asp-controller="ShoppingCart" asp-action="UpdateQuantity" asp-route-productId="@product.ProductId" asp-route-increase="true" class="plus">+</a>
                                                </div>
                                            </div>

                                        </td>*@
                                        @*<input type="text" name="quantity" value="1" size="2" id="input-quantity" class="form-control" />*@
                                        @*<a asp-area="" asp-controller="Favorites" asp-action="Add" asp-route-id="@Model.Id">
            <button type="button" id="button-cart" data-loading-text="Loading..." class="btn btn-primary btn-lg btn-block">
                Add to Wishlist
            </button>
        </a>*@
                                        <a asp-area="" asp-controller="ShoppingCart" asp-action="Add" asp-route-productId="@Model.Id">
                                            <button type="button" id="button-cart2" data-loading-text="Loading..." class="btn btn-primary btn-lg btn-block">
                                                Add to Cart
                                            </button>
                                        </a>
                                        <span>
                                            - OR -
                                        </span>
                                        <div class="btn-group">
                                            <a asp-area="" asp-controller="Favorites" asp-action="Add" asp-route-id="@Model.Id">
                                                <button type="button" class="btn btn-default wishlist" title="Add to Wish List" onclick="wishlist.add('51');">
                                                    Add to Wish List
                                                </button>
                                            </a>
                                        </div>

                                    </div>
                                    <input type="hidden" name="@Model.Id" value="@Model.Id" />

                                    <hr>
                                    <!-- AddThis Button BEGIN -->
                                    <div class="addthis_toolbox addthis_default_style" data-url="index52a0.html?route=product/product&amp;product_id=51">
                                        <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
                                        <a class="addthis_button_tweet"></a>
                                        <a class="addthis_button_pinterest_pinit"></a>
                                        <a class="addthis_counter addthis_pill_style"></a>
                                    </div>
                                    <script type="text/javascript" src="../../../../s7.addthis.com/js/300/addthis_widget.js#pubid=ra-515eeaf54693130e"></script>
                                    <!-- AddThis Button END -->
                                </div>
                            </div>
                        </div>

                        <!-- product page tab code start-->
                        <div id="tabs_info" class="product-tab col-sm-12">
                            <ul class="nav nav-tabs">
                                <li>
                                    <a href="#tab-description" data-toggle="tab">
                                        Description
                                    </a>
                                </li>
                                <li>
                                    <a href="#tab-specification" data-toggle="tab">
                                        Specification
                                    </a>
                                </li>
                                <li>
                                    <a href="#tab-review" data-toggle="tab">
                                        Reviews (@Model.Reviews.Count())
                                    </a>
                                </li>
                            </ul>
                            <div class="tab-content">
                                <div class="tab-pane active" id="tab-description">
                                    <p>
                                        @Model.Description
                                    </p>
                                </div>
                                <div class="tab-pane" id="tab-specification">

                                </div>
                                <div class="tab-pane" id="tab-review">
                                    @*<form class="form-horizontal" id="form-review">
                                        </form>*@
                                    <div>
                                        @foreach (var review in Model.Reviews)
                                        {
                                            <table class="table table-striped table-bordered">
                                                <tbody>
                                                    <tr>
                                                        <td style="width: 50%;">
                                                            <strong>
                                                                @review.Name
                                                            </strong>
                                                        </td>
                                                        <td class="text-right">
                                                            @review.CreatedOn
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td colspan="2">
                                                            <p>
                                                                @review.Content
                                                            </p>
                                                            @for (int i = 0; i < review.Rating; i++)
                                                            {
                                                                <span class="fa fa-stack">
                                                                    <i class="fa fa-star fa-stack-2x"></i>
                                                                    <i class="fa fa-star-o fa-stack-2x"></i>
                                                                </span>
                                                            }

                                                        </td>
                                                    </tr>
                                                    @if (this.User.IsInRole(GlobalConstants.AdministratorRoleName))
                                                    {
                                                        <span>
                                                            (@review.UserEmail)
                                                        </span>
                                                        <a asp-area="Administration" asp-controller="Wines" asp-action="DeleteReview" asp-route-id="@review.Id" asp-route-returnUrl="@string.Format("{0}{1}", this.Context.Request.Path, this.Context.Request.QueryString)" class="btn btn-danger float-right">
                                                            Delete
                                                        </a>
                                                    }
                                                </tbody>
                                            </table>
                                        }

                                    </div>
                                    <partial name="_WriteReviewPartial" model="new WineReviewInputModel { UserId = this.User.FindFirstValue(ClaimTypes.NameIdentifier), WineId = Model.Id }" />
                                    @*<partial name="_CommentBoxPartial" />*@
                                </div>
                            </div>
                        </div>

                    </div>
                    <div>
                        <vc:related-products category-id="@Model.CategoryId"></vc:related-products>
                    </div>
                    <span class="related_default_width" style="display:none; visibility:hidden"></span>

                </div>
            </div>
        </div>
    </div>

    <div class="zoomContainer" style="-webkit-transform: translateZ(0); position: absolute; left: 132px; top: 259px; height: 485px; width: 485px;">
        <div class="zoomWindowContainer" style="width: 450px;">
            <div class="zoomWindow" style='z-index: 999; overflow: hidden; margin-left: 0px; margin-top: 0px; background-position: -201px -125.253px; width: 485px; height: 485px; float: left; cursor: crosshair; background-repeat: no-repeat; position: absolute; background-image: url(@Model.ImageUrl); top: 0px; left: 0px; display: none;'>
                &nbsp;
            </div>
        </div>
    </div>



    @*<script type="text/javascript">
            function() {
                $('html, body').animate({
                    scrollTop: $('#tabs_info').offset().top
                }, 'slow');
            }
        </script>
        <script type="text/javascript">
            function onclick(event) {
                $('a[href=\'#tab-review\']').trigger('click');
                return false;
            }
        </script>*@
    <script type="text/javascript">
        <!--
        $('select[name=\'recurring_id\'], input[name="quantity"]').change(function () {
            $.ajax({
                url: 'index.php?route=product/product/getRecurringDescription',
                type: 'post',
                data: $('input[name=\'product_id\'], input[name=\'quantity\'], select[name=\'recurring_id\']'),
                dataType: 'json',
                beforeSend: function () {
                    $('#recurring-description').html('');
                },
                success: function (json) {
                    $('.alert-dismissible, .text-danger').remove();

                    if (json['success']) {
                        $('#recurring-description').html(json['success']);
                    }
                }
            });
        });
        //--></script>

    <script type="text/javascript">
        $(function () {
            $("#rateYo").rateYo({
                rating: 0,
                numStars: 5,
                maxValue: 5,
                halfStar: true,
                onChange: function (rating, rateYoInstance) {
                    $('#rating').val(rating);
                }
            });
        });
    </script>

    <script type="text/javascript">
<!--
        //$('#button-cart').on('click', function () {
        //    $.ajax({
        //        /*url: 'index.php?route=checkout/cart/add',*/
        //        url: 'Favorites/Add',
        //        type: 'post',
        //        data: $(''#product input[type=\'text\'], #product input[type=\'hidden\'], #product input[type=\'radio\']:checked, #product input[type=\'checkbox\']:checked, #product select, #product textarea'),
        //        dataType: 'json',
        //        beforeSend: function () {
        //            $('#button-cart').button('loading');
        //        },
        //        complete: function () {
        //            $('#button-cart').button('reset');
        //        },
        //        success: function (json) {
        //            $('.alert-dismissible, .text-danger').remove();
        //            $('.form-group').removeClass('has-error');

        //            if (json['error']) {
        //                if (json['error']['option']) {
        //                    for (i in json['error']['option']) {
        //                        var element = $('#input-option' + i.replace('_', '-'));

        //                        if (element.parent().hasClass('input-group')) {
        //                            element.parent().before('<div class="text-danger">' + json['error']['option'][i] + '</div>');
        //                        } else {
        //                            element.before('<div class="text-danger">' + json['error']['option'][i] + '</div>');
        //                        }
        //                    }
        //                }

        //                if (json['error']['recurring']) {
        //                    $('select[name=\'recurring_id\']').after('<div class="text-danger">' + json['error']['recurring'] + '</div>');
        //                }

        //                // Highlight any found errors
        //                $('.text-danger').parent().addClass('has-error');
        //            }

        //            if (json['success']) {
        //                $.notify({
        //                    message: json['success'],
        //                    target: '_blank'
        //                }, {
        //                    // settings
        //                    element: 'body',
        //                    position: null,
        //                    type: "info",
        //                    allow_dismiss: true,
        //                    newest_on_top: false,
        //                    placement: {
        //                        from: "top",
        //                        align: "center"
        //                    },
        //                    offset: 0,
        //                    spacing: 10,
        //                    z_index: 2031,
        //                    delay: 5000,
        //                    timer: 1000,
        //                    url_target: '_blank',
        //                    mouse_over: null,
        //                    animate: {
        //                        enter: 'animated fadeInDown',
        //                        exit: 'animated fadeOutUp'
        //                    },
        //                    onShow: null,
        //                    onShown: null,
        //                    onClose: null,
        //                    onClosed: null,
        //                    icon_type: 'class',
        //                    template: '<div data-notify="container" class="col-xs-11 col-sm-3 alert alert-success" role="alert">' +
        //                        '<button type="button" aria-hidden="true" class="close" data-notify="dismiss">&nbsp;&times;</button>' +
        //                        '<span data-notify="message"><i class="fa fa-check-circle"></i>&nbsp; {2}</span>' +
        //                        '<div class="progress" data-notify="progressbar">' +
        //                        '<div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div>' +
        //                        '</div>' +
        //                        '<a href="{3}" target="{4}" data-notify="url"></a>' +
        //                        '</div>'
        //                });

        //                $('#cart > button').html('<span id="cart-total">' + json['total'] + '</span>' + '<span id="cart-title">' + json['headingtitle'] + '</span>');

        //                //$('html, body').animate({ scrollTop: 0 }, 'slow');

        //                $('#cart > ul').load('index1e1c.html?route=common/cart/info%20ul%20li');
        //            }
        //        },
        //        error: function (xhr, ajaxOptions, thrownError) {
        //            alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
        //        }
        //    });
        //});
        //--></script>
    <script type="text/javascript">
<!--
        $('.date').datetimepicker({
            language: 'en-gb',
            pickTime: false
        });

        $('.datetime').datetimepicker({
            language: 'en-gb',
            pickDate: true,
            pickTime: true
        });

        $('.time').datetimepicker({
            language: 'en-gb',
            pickDate: false
        });

        $('button[id^=\'button-upload\']').on('click', function () {
            var node = this;

            $('#form-upload').remove();

            $('body').prepend('<form enctype="multipart/form-data" id="form-upload" style="display: none;"><input type="file" name="file" /></form>');

            $('#form-upload input[name=\'file\']').trigger('click');

            if (typeof timer != 'undefined') {
                clearInterval(timer);
            }

            timer = setInterval(function () {
                if ($('#form-upload input[name=\'file\']').val() != '') {
                    clearInterval(timer);

                    $.ajax({
                        url: 'index.php?route=tool/upload',
                        type: 'post',
                        dataType: 'json',
                        data: new FormData($('#form-upload')[0]),
                        cache: false,
                        contentType: false,
                        processData: false,
                        beforeSend: function () {
                            $(node).button('loading');
                        },
                        complete: function () {
                            $(node).button('reset');
                        },
                        success: function (json) {
                            $('.text-danger').remove();

                            if (json['error']) {
                                $(node).parent().find('input').after('<div class="text-danger">' + json['error'] + '</div>');
                            }

                            if (json['success']) {
                                alert(json['success']);

                                $(node).parent().find('input').val(json['code']);
                            }
                        },
                        error: function (xhr, ajaxOptions, thrownError) {
                            alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
                        }
                    });
                }
            }, 500);
        });
        //-->
    </script>
    <script type="text/javascript">
        <!--
        $('.write-review, .review-count').on('click',
            function () {
                $('html, body').animate({ scrollTop: $('#tabs_info').offset().top }, 'slow');
            });

        $('#review').delegate('.pagination a', 'click', function (e) {
            e.preventDefault();

            $('#review').fadeOut('slow');

            $('#review').load(this.href);

            $('#review').fadeIn('slow');
        });

        //$('#review').load('indexbe0f.html?route=product/product/review&amp;product_id=51');

        //$('#button-review').on('click', function () {
        //    $.ajax({
        //        url: 'index.php?route=product/product/write&product_id=51',
        //        type: 'post',
        //        dataType: 'json',
        //        data: $("#form-review").serialize(),
        //        beforeSend: function () {
        //            $('#button-review').button('loading');
        //        },
        //        complete: function () {
        //            $('#button-review').button('reset');
        //        },
        //        success: function (json) {
        //            $('.alert-dismissible').remove();

        //            if (json['error']) {
        //                $('#review').after('<div class="alert alert-danger alert-dismissible"><i class="fa fa-exclamation-circle"></i> ' + json['error'] + '</div>');
        //            }

        //            if (json['success']) {
        //                $('#review').after('<div class="alert alert-success alert-dismissible"><i class="fa fa-check-circle"></i> ' + json['success'] + '</div>');

        //                $('input[name=\'name\']').val('');
        //                $('textarea[name=\'text\']').val('');
        //                $('input[name=\'rating\']:checked').prop('checked', false);
        //            }
        //        }
        //    });
        //});

        $(document).ready(function () {
            $('.thumbnails').magnificPopup({
                type: 'image',
                delegate: 'a',
                gallery: {
                    enabled: true
                }
            });
        });


        $(document).ready(function () {
            if ($(window).width() > 767) {
                $("#tmzoom").elevateZoom({

                    gallery: 'additional-carousel',
                    //inner zoom

                    zoomType: "inner",
                    cursor: "crosshair",

                    //tint

                    tint: true,
                    tintColour: '#F90',
                    tintOpacity: 0.5,

                    //lens zoom

                    zoomType: "lens",
                    lensShape: "round",
                    lensSize: 200,

                    //Mousewheel zoom

                    scrollZoom: true


                });
                var z_index = 0;

                $(document).on('click', '.thumbnail', function () {
                    $('.thumbnails').magnificPopup('open', z_index);
                    return false;
                });

                $('.additional-carousel a').click(function () {
                    var smallImage = $(this).attr('data-image');
                    var largeImage = $(this).attr('data-zoom-image');
                    var ez = $('#tmzoom').data('elevateZoom');
                    $('.thumbnail').attr('href', largeImage);
                    ez.swaptheimage(smallImage, largeImage);
                    z_index = $(this).index('.additional-carousel a');
                    return false;
                });

            } else {
                $(document).on('click', '.thumbnail', function () {
                    $('.thumbnails').magnificPopup('open', 0);
                    return false;
                });
            }
        });

        $(document).ready(function () {
            $('.thumbnails').magnificPopup({
                delegate: 'a.elevatezoom-gallery',
                type: 'image',
                tLoading: 'Loading image #%curr%...',
                mainClass: 'mfp-with-zoom',
                gallery: {
                    enabled: true,
                    navigateByImgClick: true,
                    preload: [0, 1] // Will preload 0 - before current, and 1 after the current image
                },
                image: {
                    tError: '<a href="%url%">The image #%curr%</a> could not be loaded.',
                    titleSrc: function (item) {
                        return item.el.attr('title');
                    }
                }
            });
        });
    </script>

</body>
